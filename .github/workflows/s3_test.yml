name: Uploading code to S3
on:
  pull_request:
    # types:
    #   - closed
    # branches: [ "main"]

jobs:
  build-and-deploy:
    if: ((${{ github.event_name == 'pull_request'}}) and (${{github.event.pull_request.merged }} == true))
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Sync files to S3
        run: |
          echo "Changed files:"
          for file in $(git diff --name-only ${{ github.event.before }} ${{ github.sha }}); do
            echo $file
          done
